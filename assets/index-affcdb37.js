import{b as y,e as h}from"./opencv-49a7e8f2.js";const _=y.create({timeout:2e4,baseURL:"https://api.test.wecreat.com"});_.interceptors.request.use(i=>i,i=>(console.error(i),Promise.reject(i)));_.interceptors.response.use(i=>i.status===200?Promise.resolve(i.data):Promise.reject(i.data),i=>Promise.reject(i));const l=i=>_(i);var L=(i=>(i.test="test",i.development="dev",i.production="release",i))(L||{});const p=i=>l({url:i+"/device/info",method:"get"}),P=({baseUrl:i,name:a})=>l({url:i+"/device/set_config",method:"post",data:{name:a}}),N=({email:i,name:a})=>l({url:"/users/verify_code",method:"post",data:{email:i,name:a}}),U=i=>{const a="production";return l({url:"https://d2q53vuvwvxi9m.cloudfront.net/".concat(i,"/").concat(L[a],"/version.json"),method:"get"})};var S=Array.isArray;const I=S;var C=(i=>(i.LINE="LINE",i.RECT="RECT",i.CIRCLE="CIRCLE",i.TEXT="TEXT",i.SHAPE="SHAPE",i.TRIANGLE="TRIANGLE",i.UPLOAD="UPLOAD",i.UNDO="UNDO",i.REDO="REDO",i.SVG="SVG",i))(C||{}),D=(i=>(i.engrave="engrave",i.fillEngrave="fillEngrave",i.cut="cut",i))(D||{}),F=(i=>(i[i.TEXT=1]="TEXT",i[i.DATA_URL=2]="DATA_URL",i))(F||{}),R=(i=>(i[i.STOP=0]="STOP",i[i.RESET=1]="RESET",i[i.START=2]="START",i[i.FINISH=3]="FINISH",i))(R||{});const j={engrave:"#000000",fillEngrave:"#17489C",cut:"#E61F19",variableThickness:"#00FF00"};console.log(F);function B(i){return new Promise(async a=>{const n=document.createElement("input");n.type="file",I(i)&&(i=".".concat(i.join(",."))),n.accept=i,n.onchange=async s=>{const t=s.target.files[0];a(t),n.remove()},n.click()})}class o{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(a,n=!1){return this.onePassHasher.start().appendStr(a).end(n)}static hashAsciiStr(a,n=!1){return this.onePassHasher.start().appendAsciiStr(a).end(n)}static _hex(a){const n=o.hexChars,s=o.hexOut;let t,e,r,f;for(f=0;f<4;f+=1)for(e=f*8,t=a[f],r=0;r<8;r+=2)s[e+1+r]=n.charAt(t&15),t>>>=4,s[e+0+r]=n.charAt(t&15),t>>>=4;return s.join("")}static _md5cycle(a,n){let s=a[0],t=a[1],e=a[2],r=a[3];s+=(t&e|~t&r)+n[0]-680876936|0,s=(s<<7|s>>>25)+t|0,r+=(s&t|~s&e)+n[1]-389564586|0,r=(r<<12|r>>>20)+s|0,e+=(r&s|~r&t)+n[2]+606105819|0,e=(e<<17|e>>>15)+r|0,t+=(e&r|~e&s)+n[3]-1044525330|0,t=(t<<22|t>>>10)+e|0,s+=(t&e|~t&r)+n[4]-176418897|0,s=(s<<7|s>>>25)+t|0,r+=(s&t|~s&e)+n[5]+1200080426|0,r=(r<<12|r>>>20)+s|0,e+=(r&s|~r&t)+n[6]-1473231341|0,e=(e<<17|e>>>15)+r|0,t+=(e&r|~e&s)+n[7]-45705983|0,t=(t<<22|t>>>10)+e|0,s+=(t&e|~t&r)+n[8]+1770035416|0,s=(s<<7|s>>>25)+t|0,r+=(s&t|~s&e)+n[9]-1958414417|0,r=(r<<12|r>>>20)+s|0,e+=(r&s|~r&t)+n[10]-42063|0,e=(e<<17|e>>>15)+r|0,t+=(e&r|~e&s)+n[11]-1990404162|0,t=(t<<22|t>>>10)+e|0,s+=(t&e|~t&r)+n[12]+1804603682|0,s=(s<<7|s>>>25)+t|0,r+=(s&t|~s&e)+n[13]-40341101|0,r=(r<<12|r>>>20)+s|0,e+=(r&s|~r&t)+n[14]-1502002290|0,e=(e<<17|e>>>15)+r|0,t+=(e&r|~e&s)+n[15]+1236535329|0,t=(t<<22|t>>>10)+e|0,s+=(t&r|e&~r)+n[1]-165796510|0,s=(s<<5|s>>>27)+t|0,r+=(s&e|t&~e)+n[6]-1069501632|0,r=(r<<9|r>>>23)+s|0,e+=(r&t|s&~t)+n[11]+643717713|0,e=(e<<14|e>>>18)+r|0,t+=(e&s|r&~s)+n[0]-373897302|0,t=(t<<20|t>>>12)+e|0,s+=(t&r|e&~r)+n[5]-701558691|0,s=(s<<5|s>>>27)+t|0,r+=(s&e|t&~e)+n[10]+38016083|0,r=(r<<9|r>>>23)+s|0,e+=(r&t|s&~t)+n[15]-660478335|0,e=(e<<14|e>>>18)+r|0,t+=(e&s|r&~s)+n[4]-405537848|0,t=(t<<20|t>>>12)+e|0,s+=(t&r|e&~r)+n[9]+568446438|0,s=(s<<5|s>>>27)+t|0,r+=(s&e|t&~e)+n[14]-1019803690|0,r=(r<<9|r>>>23)+s|0,e+=(r&t|s&~t)+n[3]-187363961|0,e=(e<<14|e>>>18)+r|0,t+=(e&s|r&~s)+n[8]+1163531501|0,t=(t<<20|t>>>12)+e|0,s+=(t&r|e&~r)+n[13]-1444681467|0,s=(s<<5|s>>>27)+t|0,r+=(s&e|t&~e)+n[2]-51403784|0,r=(r<<9|r>>>23)+s|0,e+=(r&t|s&~t)+n[7]+1735328473|0,e=(e<<14|e>>>18)+r|0,t+=(e&s|r&~s)+n[12]-1926607734|0,t=(t<<20|t>>>12)+e|0,s+=(t^e^r)+n[5]-378558|0,s=(s<<4|s>>>28)+t|0,r+=(s^t^e)+n[8]-2022574463|0,r=(r<<11|r>>>21)+s|0,e+=(r^s^t)+n[11]+1839030562|0,e=(e<<16|e>>>16)+r|0,t+=(e^r^s)+n[14]-35309556|0,t=(t<<23|t>>>9)+e|0,s+=(t^e^r)+n[1]-1530992060|0,s=(s<<4|s>>>28)+t|0,r+=(s^t^e)+n[4]+1272893353|0,r=(r<<11|r>>>21)+s|0,e+=(r^s^t)+n[7]-155497632|0,e=(e<<16|e>>>16)+r|0,t+=(e^r^s)+n[10]-1094730640|0,t=(t<<23|t>>>9)+e|0,s+=(t^e^r)+n[13]+681279174|0,s=(s<<4|s>>>28)+t|0,r+=(s^t^e)+n[0]-358537222|0,r=(r<<11|r>>>21)+s|0,e+=(r^s^t)+n[3]-722521979|0,e=(e<<16|e>>>16)+r|0,t+=(e^r^s)+n[6]+76029189|0,t=(t<<23|t>>>9)+e|0,s+=(t^e^r)+n[9]-640364487|0,s=(s<<4|s>>>28)+t|0,r+=(s^t^e)+n[12]-421815835|0,r=(r<<11|r>>>21)+s|0,e+=(r^s^t)+n[15]+530742520|0,e=(e<<16|e>>>16)+r|0,t+=(e^r^s)+n[2]-995338651|0,t=(t<<23|t>>>9)+e|0,s+=(e^(t|~r))+n[0]-198630844|0,s=(s<<6|s>>>26)+t|0,r+=(t^(s|~e))+n[7]+1126891415|0,r=(r<<10|r>>>22)+s|0,e+=(s^(r|~t))+n[14]-1416354905|0,e=(e<<15|e>>>17)+r|0,t+=(r^(e|~s))+n[5]-57434055|0,t=(t<<21|t>>>11)+e|0,s+=(e^(t|~r))+n[12]+1700485571|0,s=(s<<6|s>>>26)+t|0,r+=(t^(s|~e))+n[3]-1894986606|0,r=(r<<10|r>>>22)+s|0,e+=(s^(r|~t))+n[10]-1051523|0,e=(e<<15|e>>>17)+r|0,t+=(r^(e|~s))+n[1]-2054922799|0,t=(t<<21|t>>>11)+e|0,s+=(e^(t|~r))+n[8]+1873313359|0,s=(s<<6|s>>>26)+t|0,r+=(t^(s|~e))+n[15]-30611744|0,r=(r<<10|r>>>22)+s|0,e+=(s^(r|~t))+n[6]-1560198380|0,e=(e<<15|e>>>17)+r|0,t+=(r^(e|~s))+n[13]+1309151649|0,t=(t<<21|t>>>11)+e|0,s+=(e^(t|~r))+n[4]-145523070|0,s=(s<<6|s>>>26)+t|0,r+=(t^(s|~e))+n[11]-1120210379|0,r=(r<<10|r>>>22)+s|0,e+=(s^(r|~t))+n[2]+718787259|0,e=(e<<15|e>>>17)+r|0,t+=(r^(e|~s))+n[9]-343485551|0,t=(t<<21|t>>>11)+e|0,a[0]=s+a[0]|0,a[1]=t+a[1]|0,a[2]=e+a[2]|0,a[3]=r+a[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(o.stateIdentity),this}appendStr(a){const n=this._buffer8,s=this._buffer32;let t=this._bufferLength,e,r;for(r=0;r<a.length;r+=1){if(e=a.charCodeAt(r),e<128)n[t++]=e;else if(e<2048)n[t++]=(e>>>6)+192,n[t++]=e&63|128;else if(e<55296||e>56319)n[t++]=(e>>>12)+224,n[t++]=e>>>6&63|128,n[t++]=e&63|128;else{if(e=(e-55296)*1024+(a.charCodeAt(++r)-56320)+65536,e>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");n[t++]=(e>>>18)+240,n[t++]=e>>>12&63|128,n[t++]=e>>>6&63|128,n[t++]=e&63|128}t>=64&&(this._dataLength+=64,o._md5cycle(this._state,s),t-=64,s[0]=s[16])}return this._bufferLength=t,this}appendAsciiStr(a){const n=this._buffer8,s=this._buffer32;let t=this._bufferLength,e,r=0;for(;;){for(e=Math.min(a.length-r,64-t);e--;)n[t++]=a.charCodeAt(r++);if(t<64)break;this._dataLength+=64,o._md5cycle(this._state,s),t=0}return this._bufferLength=t,this}appendByteArray(a){const n=this._buffer8,s=this._buffer32;let t=this._bufferLength,e,r=0;for(;;){for(e=Math.min(a.length-r,64-t);e--;)n[t++]=a[r++];if(t<64)break;this._dataLength+=64,o._md5cycle(this._state,s),t=0}return this._bufferLength=t,this}getState(){const a=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[a[0],a[1],a[2],a[3]]}}setState(a){const n=a.buffer,s=a.state,t=this._state;let e;for(this._dataLength=a.length,this._bufferLength=a.buflen,t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],e=0;e<n.length;e+=1)this._buffer8[e]=n.charCodeAt(e)}end(a=!1){const n=this._bufferLength,s=this._buffer8,t=this._buffer32,e=(n>>2)+1;this._dataLength+=n;const r=this._dataLength*8;if(s[n]=128,s[n+1]=s[n+2]=s[n+3]=0,t.set(o.buffer32Identity.subarray(e),e),n>55&&(o._md5cycle(this._state,t),t.set(o.buffer32Identity)),r<=4294967295)t[14]=r;else{const f=r.toString(16).match(/(.*?)(.{0,8})$/);if(f===null)return;const c=parseInt(f[2],16),b=parseInt(f[1],16)||0;t[14]=c,t[15]=b}return o._md5cycle(this._state,t),a?this._state:o._hex(this._state)}}o.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]);o.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);o.hexChars="0123456789abcdef";o.hexOut=[];o.onePassHasher=new o;if(o.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.");function H(i,a=72){return i/a*25.4}function O(i,a,{w:n,h:s}){return new Promise((t,e)=>{const r=h.imread(i),f=new h.Size(i.width,i.height),c=h.matFromArray(4,1,h.CV_32FC2,a),b=[a[0],a[1]],A=[a[0],a[1]+s],v=[a[0]+n,a[1]+s],E=[a[0]+n,a[1]],x=[...b,...A,...v,...E],g=h.matFromArray(4,1,h.CV_32FC2,x),m=h.getPerspectiveTransform(c,g);h.warpPerspective(r,r,m,f,h.INTER_LINEAR,h.BORDER_CONSTANT,new h.Scalar);const u=document.createElement("canvas");u.width=i.width,u.height=i.height,h.imshow(u,r),r.delete(),c.delete(),g.delete(),m.delete();const w=u.toDataURL("image/png",1),d=new Image;d.src=w,d.onload=()=>{t(d)},r.onerror=e})}function z(i){return new Blob([i]).size/1024/1024}function G(i,a="string"){const n=new o;return a==="string"?n.appendAsciiStr(i):a==="blob"&&n.appendByteArray(i),n.end()}export{R as C,j as E,o as M,C as O,D as P,z as a,P as b,H as c,p as d,G as e,U as g,I as i,B as s,O as t,N as v};
