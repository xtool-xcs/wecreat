import{d as J,L as K,g as D,r as d,s as Q,i as Y,c as i,j as l,t as r,b as t,u as C,v as E,w as f,k as b,m as Z,O as ee,a as y,o as u,x as ne,_ as oe}from"./index-e43f4e63.js";import{_ as O}from"./bottomPopSheet.vue_vue_type_style_index_0_lang-1c011284.js";import{u as se,_ as te,V as ae}from"./bottomBar.vue_vue_type_style_index_0_lang-af91e570.js";import{u as le}from"./device-1f3f345b.js";import{u as ie}from"./user-a7205a05.js";import{s as ue}from"./opencv-49a7e8f2.js";import{g as q}from"./getElementPX-5c89db0f.js";import{s as re}from"./function-call-76f75aad.js";import"./index-affcdb37.js";import"./index-410ce858.js";import"./isObject-93378927.js";const me=""+new URL("default-profile-photo-c72de32a.png",import.meta.url).href,de={class:"mobile-mine-page"},ce={class:"user-info"},pe={class:"header-img-box"},ve=["src"],ge={key:1,class:"head-img",src:me,alt:"",draggable:"false"},fe={class:"right-infos"},he={class:"user-id info-row"},_e={key:0,class:"words label"},we={class:"vip-level"},be={class:"words label"},Ve={key:0,class:"tag"},ke={key:1,style:{color:"white"}},Ce={class:"setting-content"},ye={class:"setting-title"},Se={key:0,class:"dot"},Ne={key:0},Ue={style:{color:"red"}},Ie={class:"pop-content"},$e={class:"pop-content"},Pe=J({__name:"index",setup(Le){var L;const V=Z(),S=window.innerHeight,p=ie(),c=le(),{t:m,locale:N}=K(),v=D(()=>{var e;return(e=c.deviceParams)==null?void 0:e.wlan0_ip}),g=D(()=>{var e;return(e=c.deviceParams)==null?void 0:e.name}),U=d(!1),h=d(!1),_=d(!1),w=d(),B=d(S),I=d(),k=d([{text:m("mine.mm"),value:"mm"},{text:m("mine.inches"),value:"in"}]),z=d([{text:"简体中文",value:"zh_CN"},{text:"English",value:"en_US"}]),$=e=>k.value.find(a=>a.value===e).text,o=Q({unit:[p.setOption.unit||"mm"],unitName:$(p.setOption.unit||"mm"),language:"",airPumpSwitch:c.airPumpSwitch,softVersion:c.packageInfos.appVersion||"1.0.04",hardWareVersion:(L=c.deviceParams)==null?void 0:L.app_version,userInfos:p.userInfos}),{isFindNewVersion:P}=se(),j=({currentOption:e})=>{o.unit=[e.value],o.unitName=e.text,h.value=!1,p.setConvertUnit(e.value)},T=({currentOption:e})=>{_.value=!1,w.value=[e.value],N.value=e.value,o.language=e.text,localStorage.setItem("language",N.value),k.value=[{text:m("mine.mm"),value:"mm"},{text:m("mine.inches"),value:"in"}],o.unitName=$(o.unit[0])},A=()=>{g.value&&V.push("/changeEquName/".concat(g.value))},H=()=>{V.push("/connectConfig")},M=()=>{V.push("/login")},R=()=>{var e;P.value&&((e=I.value)==null||e.handleShow())},W=()=>{const e=localStorage.getItem("language"),n=(navigator.language||navigator.browserLanguage).toLowerCase()==="zh-cn"?"zh_CN":"en_US",a=e||n;w.value=[a],o.language=a==="zh_CN"?"中文":"English"},F=()=>{o.userInfos&&re({title:m("login.loginOut"),confirmButtonText:m("common.confirm"),cancelButtonText:m("common.cancel")}).then(()=>{var e;localStorage.removeItem("token"),p.setUserInfos(null),ue(m("login.tips.loginOutSeccess")),ee("log",{type:"0",identifier:(e=o.userInfos)==null?void 0:e.email}),o.userInfos=null}).catch(()=>{})},X=e=>{c.setAirPumpSwitch(e)};return Y(async()=>{W(),v.value&&c.setDeviceIP(v.value),B.value=S-q(document.querySelector(".user-info")).height-q(document.querySelector(".bottom-bar")).height-26}),(e,n)=>{const a=y("van-field"),G=y("van-switch"),x=y("van-picker");return u(),i("div",de,[l("div",ce,[l("div",pe,[o.userInfos?(u(),i("img",{key:0,class:"head-img",src:o.userInfos.headUrl,alt:"",draggable:"false"},null,8,ve)):(u(),i("img",ge))]),l("div",fe,[l("div",he,[o.userInfos?(u(),i("span",_e,r(o.userInfos.displayName),1)):(u(),i("span",{key:1,class:"words label",onClick:M},r(e.$t("mine.clickMeLogin")),1)),l("span",{class:"right-btn btns",onClick:H},r(e.$t("mine.addNewDec")),1)]),l("div",we,[l("span",be,r(e.$t("mine.vipLevel")),1),o.userInfos?(u(),i("span",Ve,"LV"+r(o.userInfos.numberOfOrders),1)):(u(),i("span",ke,"- -"))])])]),l("div",Ce,[l("div",ye,r(e.$t("mine.commonSetting")),1),t(a,{modelValue:o.unitName,"onUpdate:modelValue":n[0]||(n[0]=s=>o.unitName=s),"is-link":"",readonly:"",name:"picker",label:e.$t("mine.unit"),"label-width":"60%",onClick:n[1]||(n[1]=s=>h.value=!0)},null,8,["modelValue","label"]),t(a,{modelValue:o.language,"onUpdate:modelValue":n[2]||(n[2]=s=>o.language=s),"is-link":"",readonly:"",name:"picker",label:e.$t("mine.language"),"label-width":"60%",onClick:n[3]||(n[3]=s=>_.value=!0)},null,8,["modelValue","label"]),t(a,{modelValue:C(v),"onUpdate:modelValue":n[4]||(n[4]=s=>E(v)?v.value=s:null),"is-link":"",readonly:"",name:"picker",label:e.$t("mine.connectedDecNum"),"label-width":"60%"},null,8,["modelValue","label"]),t(a,{modelValue:C(g),"onUpdate:modelValue":n[5]||(n[5]=s=>E(g)?g.value=s:null),"is-link":"",readonly:"",name:"picker",label:e.$t("mine.currentDecName"),"label-width":"60%",onClick:A},null,8,["modelValue","label"]),t(a,{name:"switch",label:e.$t("mine.bengSwitch"),class:"air-pump-switch","label-width":"60%"},{input:f(()=>[t(G,{modelValue:o.airPumpSwitch,"onUpdate:modelValue":n[6]||(n[6]=s=>o.airPumpSwitch=s),size:"22px","active-color":"var(--backgroundColorMain)",onChange:X},null,8,["modelValue"])]),_:1},8,["label"]),t(a,{name:"switch",label:e.$t("mine.softVersion"),"label-width":"60%"},{input:f(()=>[o.softVersion?(u(),i("span",{key:0,class:"software-field",onClick:R},[ne(" v"+r(o.softVersion)+" ",1),C(P)?(u(),i("span",Se)):b("",!0)])):b("",!0)]),_:1},8,["label"]),t(a,{name:"switch",label:e.$t("mine.hardwareVersion"),"label-width":"60%"},{input:f(()=>[o.hardWareVersion?(u(),i("span",Ne,"v"+r(o.hardWareVersion),1)):b("",!0)]),_:1},8,["label"]),o.userInfos?(u(),i("div",{key:0,class:"van-cell flex-j_c-c",onClick:F},[l("span",Ue,r(e.$t("login.loginOut")),1)])):b("",!0)]),t(te),t(O,{show:h.value,"onUpdate:show":n[9]||(n[9]=s=>h.value=s),title:e.$t("mine.unit")},{default:f(()=>[l("div",Ie,[t(x,{modelValue:o.unit,"onUpdate:modelValue":n[7]||(n[7]=s=>o.unit=s),"show-toolbar":!1,columns:k.value,onClickOption:j,onCancel:n[8]||(n[8]=s=>U.value=!1)},null,8,["modelValue","columns"])])]),_:1},8,["show","title"]),t(O,{show:_.value,"onUpdate:show":n[12]||(n[12]=s=>_.value=s),title:e.$t("mine.language")},{default:f(()=>[l("div",$e,[t(x,{modelValue:w.value,"onUpdate:modelValue":n[10]||(n[10]=s=>w.value=s),"show-toolbar":!1,columns:z.value,onClickOption:T,onCancel:n[11]||(n[11]=s=>U.value=!1)},null,8,["modelValue","columns"])])]),_:1},8,["show","title"]),t(ae,{ref_key:"versionUpdate",ref:I},null,512)])}}});const Me=oe(Pe,[["__scopeId","data-v-7f770846"]]);export{Me as default};
